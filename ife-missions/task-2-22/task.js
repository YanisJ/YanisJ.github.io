function Node(e){this.data=e,this.parent=null,this.left=null,this.right=null}function Tree(e){var t=new Node(e);this._root=t}function render(){var e=document.querySelector(".container");tree.traverseBF(function(e){e.html=document.createElement("div"),e.parent?(e.parent.html.appendChild(e.html),e.html.classList.add(e.parent.left===e?"left":"right")):e.html.classList.add("root")}),e.appendChild(tree._root.html)}function draw(){function e(){t.html.classList.remove("hi"),t=void 0,clearInterval(timer),timer=null}var t;timer=setInterval(function(){states.length?(t&&t.html.classList.remove("hi"),t=states.shift(),t.html.classList.add("hi")):e()},500)}function deal(e){return function(){return timer?alert("动画正在进行中"):(e.call(tree,function(e){states.push(e),console.log(e.data)}),void draw())}}function initEvent(){var e=document.querySelector("#dfs"),t=document.querySelector("#bfs"),r=document.querySelector("#dlr"),n=document.querySelector("#ldr"),i=document.querySelector("#lrd");e.addEventListener("click",deal(tree.traverseDF)),t.addEventListener("click",deal(tree.traverseBF)),r.addEventListener("click",deal(tree.traverseDLR)),n.addEventListener("click",deal(tree.traverseLDR)),i.addEventListener("click",deal(tree.traverseLRD))}function init(){render(),initEvent()}Tree.prototype.traverseDF=function(e){!function t(r){r.left&&t(r.left),r.right&&t(r.right),e(r)}(this._root)},Tree.prototype.traverseBF=function(e){var t=[];for(t.push(this._root),currentTree=t.shift();currentTree;)currentTree.left&&t.push(currentTree.left),currentTree.right&&t.push(currentTree.right),e(currentTree),currentTree=t.shift()},Tree.prototype.traverseDLR=function(e){!function t(r){r&&(e(r),t(r.left),t(r.right))}(this._root)},Tree.prototype.traverseLDR=function(e){!function t(r){r&&(t(r.left),e(r),t(r.right))}(this._root)},Tree.prototype.traverseLRD=function(e){!function t(r){r&&(t(r.left),t(r.right),e(r))}(this._root)},Tree.prototype.contains=function(e,t){t.call(this,e)},Tree.prototype.add=function(e,t,r,n){var i=new Node(e),o=null,a=function(e){e.data===t&&(o=e)};if(this.contains(a,n),!o||o[r])throw new Error(o?"The "+r+" element is exist.":"Cannot add node to a non-existent parent.");o[r]=i,i.parent=o},Tree.prototype.remove=function(e,t,r){var n=null,i=null,o=null,a=function(e){e.data===t&&(n=e)},s=function(t){t.data===e&&(i=t)};if(this.contains(a,r),!n)throw new Error("Parent does not exist.");if(this.contains(s,r),!i)throw new Error("Node to remove does not exist.");return o=i,n.left===i?n.left=null:n.right=null,o};var tree=new Tree("one");tree.add("two","one","left",tree.traverseBF),tree.add("three","one","right",tree.traverseBF),tree.add("four","two","left",tree.traverseBF),tree.add("five","two","right",tree.traverseBF),tree.add("six","three","left",tree.traverseBF),tree.add("seven","three","right",tree.traverseBF),tree.add("eight","four","left",tree.traverseBF),tree.add("nine","four","right",tree.traverseBF),tree.add("ten","five","left",tree.traverseBF),tree.add("eleven","five","right",tree.traverseBF),tree.add("twelve","six","left",tree.traverseBF),tree.add("thirteen","six","right",tree.traverseBF),tree.add("fourteen","seven","left",tree.traverseBF),tree.add("fifteen","seven","right",tree.traverseBF);var states=[],timer;window.onload=init;